<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Moja Muzyka</title>
<style>
:root {
    --dark-bg: #121212;
    --dark-card: #1e1e1e;
    --dark-accent: #1db954;
    --light-bg: #f5f5f5;
    --light-card: #ffffff;
    --light-accent: #1db954;
    --transition-speed: 0.3s;
}

body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: var(--dark-bg);
    color: #fff;
    transition: background var(--transition-speed), color var(--transition-speed);
}

body.light {
    background: var(--light-bg);
    color: #000;
}

header {
    padding: 20px;
    text-align: center;
    font-size: 28px;
    font-weight: bold;
    background: var(--dark-accent);
    color: #000;
    transition: background var(--transition-speed);
}

body.light header {
    background: var(--light-accent);
    color: #000;
}

.container {
    max-width: 700px;
    margin: auto;
    padding: 20px;
}

.upload-label {
    display: inline-block;
    padding: 12px 18px;
    background: var(--dark-accent);
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: background var(--transition-speed);
}

body.light .upload-label {
    background: var(--light-accent);
}

#fileUpload { display: none; }

.song {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    background: var(--dark-card);
    cursor: pointer;
    transition: background var(--transition-speed), transform 0.2s, box-shadow 0.3s;
    overflow: hidden;
}

.song:hover {
    background: linear-gradient(90deg, #1db954, #1ed760);
    transform: translateX(5px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
}

body.light .song { background: var(--light-card); }

.song.active {
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0% { box-shadow: 0 0 0px #1db954; }
    50% { box-shadow: 0 0 15px #1db954; }
    100% { box-shadow: 0 0 0px #1db954; }
}

.cover {
    width: 50px;
    height: 50px;
    border-radius: 8px;
    background-size: cover;
    background-position: center;
    flex-shrink: 0;
}

.audio-wrapper {
    position: relative;
    width: 100%;
}

.audio-wrapper audio {
    width: 100%;
    outline: none;
}

.audio-bar {
    position: absolute;
    bottom: 0;
    left: 0;
    height: 5px;
    width: 0;
    background: #1db954;
    transition: width 0.1s linear;
    border-radius: 3px;
}

.controls {
    text-align: center;
    margin-top: 15px;
}

.controls button {
    padding: 10px 20px;
    margin: 0 5px;
    font-size: 18px;
    font-weight: bold;
    border: none;
    border-radius: 6px;
    background: var(--dark-accent);
    color: #000;
    cursor: pointer;
    transition: background var(--transition-speed);
}

body.light .controls button { background: var(--light-accent); }

.controls button:hover { background: #17a74a; }

#themeToggle {
    margin-top: 20px;
    padding: 8px 16px;
    cursor: pointer;
    border-radius: 6px;
    border: none;
    font-weight: bold;
    background: var(--dark-accent);
    color: #000;
    transition: background var(--transition-speed);
}

body.light #themeToggle { background: var(--light-accent); }
</style>
</head>
<body>

<header>üé∂ Twoja Muzyka</header>

<div class="container">
    <label class="upload-label">
        + Dodaj utwory
        <input type="file" id="fileUpload" accept="audio/*" multiple>
    </label>

    <div id="songList"></div>

    <div class="audio-wrapper">
        <audio id="player" controls></audio>
        <div class="audio-bar" id="audioBar"></div>
    </div>

    <div class="controls">
        <button id="prevBtn">‚èÆÔ∏è</button>
        <button id="nextBtn">‚è≠Ô∏è</button>
    </div>

    <button id="themeToggle">Prze≈ÇƒÖcz tryb</button>
</div>

<script>
const upload = document.getElementById("fileUpload");
const list = document.getElementById("songList");
const player = document.getElementById("player");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const themeToggle = document.getElementById("themeToggle");
const audioBar = document.getElementById("audioBar");

let queue = [];
let currentIndex = 0;

// Przyk≈Çadowe utwory
const samples = [
    {name:"Sample Beat 1", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"},
    {name:"Sample Beat 2", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"},
    {name:"Sample Beat 3", url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"}
];

// Funkcja do generowania gradientowych ok≈Çadek
function generateCover() {
    const angle = Math.floor(Math.random()*360);
    const color1 = `hsl(${Math.floor(Math.random()*360)},70%,50%)`;
    const color2 = `hsl(${Math.floor(Math.random()*360)},70%,50%)`;
    return `linear-gradient(${angle}deg, ${color1}, ${color2})`;
}

// Dodawanie piosenek do listy
function addSongToList(file){
    const cover = generateCover();
    queue.push({...file, cover});
    const div = document.createElement("div");
    div.className = "song";
    div.innerHTML = `<div class="cover" style="background:${cover};"></div><div>${file.name}</div>`;
    div.onclick = () => playSong(queue.indexOf(queue.find(f=>f.url===file.url)));
    list.appendChild(div);
}

samples.forEach(addSongToList);

function playSong(index){
    const songElements = document.querySelectorAll(".song");
    songElements.forEach(el => el.classList.remove("active"));
    if(songElements[index]) songElements[index].classList.add("active");
    currentIndex = index;
    player.src = queue[index].url;
    player.play();
}

player.addEventListener("ended", () => {
    if(currentIndex+1<queue.length) playSong(currentIndex+1);
});

prevBtn.onclick = () => { if(currentIndex>0) playSong(currentIndex-1); };
nextBtn.onclick = () => { if(currentIndex+1<queue.length) playSong(currentIndex+1); };

// Upload w≈Çasnych plik√≥w
upload.addEventListener("change", function(){
    [...this.files].forEach(file=>{
        const url = URL.createObjectURL(file);
        addSongToList({name:file.name,url});
    });
});

// Dark/Light mode
themeToggle.onclick = () => { document.body.classList.toggle("light"); };

// Animacja paska odtwarzacza
player.addEventListener("timeupdate", () => {
    if(player.duration>0){
        const percent = (player.currentTime/player.duration)*100;
        audioBar.style.width = percent+"%";
    }
});
</script>

</body>
</html>
